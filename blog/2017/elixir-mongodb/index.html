<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Elixir, Mongo, Regex | Frank McGeough </title> <meta name="author" content="Frank McGeough"> <meta name="description" content="Accessing MongoDB with Elixir"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://fmcgeough.github.io/blog/2017/elixir-mongodb/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Frank</span> McGeough </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Elixir, Mongo, Regex</h1> <p class="post-meta"> Created in March 23, 2017 </p> <p class="post-tags"> <a href="/blog/2017"> <i class="fa-solid fa-calendar fa-sm"></i> 2017 </a>   ·   <a href="/blog/tag/elixir"> <i class="fa-solid fa-hashtag fa-sm"></i> Elixir</a>     ·   <a href="/blog/category/elixir"> <i class="fa-solid fa-tag fa-sm"></i> Elixir</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <p>I built a Phoenix app for my company that provides lots of administrative insight into our system. It gives operations and support folks some information beyond what’s provided in our traditional UI. It also tries to diagnose common problems and provide suggestions on how they can be fixed (or indications of what else to examine).</p> <p>The majority of the data in our system is stored in Postgres. That worked really well for me in using Phoenix and Elixir since Postgres is very well supported by the <a href="https://hex.pm/packages/postgrex" rel="external nofollow noopener" target="_blank">Postgrex driver</a>. I haven’t had any issues with it. So, many thanks to everyone that worked on that.</p> <p>I had a new request to provide a page that would have to read from a Mongo database. I hadn’t explored the Mongo driver situation in Elixir before. I got it to work fairly quickly but its a lot less smooth and seemingly less mature than Postgrex. That may just be my lack of exposure to Mongo in general. I’ve always lived in the relational database world and although I’ve played with Mongo I’ve never looked at it for anything serious and didn’t know it nearly as well as I probably should have. This post is about various things I found out. Some of them (or maybe all of them) may be no big news for folks that use Mongo on a regular basis. But if you are more like me and don’t know that much it might be helpful. As in the case of the Postgres driver many thanks to all the developers that have contributed their time and effort to get the Mongo driver to its current state.</p> <p><a href="https://hex.pm/" rel="external nofollow noopener" target="_blank">hex.pm</a> is the repo for Elixir. Its fairly awesome. One thing that’s great about this is you can easily see what is the most popular library for what you are interested in. In the case of Mongo it looks like the clear favorite is <a href="https://hex.pm/packages/mongodb" rel="external nofollow noopener" target="_blank">mongodb</a>. The latest version is 0.2.0 created November 11, 2016.</p> <p>I created a sample project to fiddle around with :</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mix new mongo_test
</code></pre></div></div> <p>Then I edited the mix.exs file to add the dependencies suggested in the Mongodb doc :</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>defp deps do
  [{:mongodb, "~&gt; 0.2.0"},
   {:poolboy, "&gt;= 0.0.0"}]
end
</code></pre></div></div> <p>I had a mongo instance running locally. I populated a new collection with some test data :</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>db.testData.insert({"x" : "Hello" })
db.testData.insert({"x" : "Goodbye" })
db.testData.insert({"x" : "Frank" })
db.testData.insert({"x" : "Fred" })
db.testData.insert({"x" : "Four" })
db.testData.insert({"x" : "ourF" })
db.testData.insert({"x" : "ourf" })
db.testData.insert({"x" : "Foot" })
db.testData.insert({"x" : "123324"})
db.testData.insert({"x" : "123324 ABC"})
db.testData.insert({"x" : "frank"})
</code></pre></div></div> <p>and then I fired up iex with iex -S mix to try and connect to the database and search this collection. Starting a process that provides the connection to Mongo is straightforward. You can name the pid with an atom so that you can reference that in the future instead of keeping the pid around and having to manage it.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>iex(1)&gt; {:ok, _} = Mongo.start_link(database: "test", name: :mongo)
iex(2)&gt; :mongo |&gt; Mongo.find("testData", %{}) |&gt; Enum.to_list()
  [%{"_id" =&gt; #BSON.ObjectId&lt;58d4b1d6a6ba445542adc9d3&gt;, "x" =&gt; "Hello"},
   %{"_id" =&gt; #BSON.ObjectId&lt;58d4b1d6a6ba445542adc9d4&gt;, "x" =&gt; "Goodbye"},
   %{"_id" =&gt; #BSON.ObjectId&lt;58d4b1d6a6ba445542adc9d5&gt;, "x" =&gt; "Frank"},
   %{"_id" =&gt; #BSON.ObjectId&lt;58d4b1d6a6ba445542adc9d6&gt;, "x" =&gt; "Fred"},
   %{"_id" =&gt; #BSON.ObjectId&lt;58d4b1d6a6ba445542adc9d7&gt;, "x" =&gt; "Four"},
   %{"_id" =&gt; #BSON.ObjectId&lt;58d4b1d6a6ba445542adc9d8&gt;, "x" =&gt; "ourF"},
   %{"_id" =&gt; #BSON.ObjectId&lt;58d4b1d6a6ba445542adc9d9&gt;, "x" =&gt; "ourf"},
   %{"_id" =&gt; #BSON.ObjectId&lt;58d4b1d6a6ba445542adc9da&gt;, "x" =&gt; "Foot"},
   %{"_id" =&gt; #BSON.ObjectId&lt;58d4b1d6a6ba445542adc9db&gt;, "x" =&gt; "123324"},
   %{"_id" =&gt; #BSON.ObjectId&lt;58d4b1d6a6ba445542adc9dc&gt;, "x" =&gt; "123324 ABC"},
   %{"_id" =&gt; #BSON.ObjectId&lt;58d4b1d6a6ba445542adc9dd&gt;, "x" =&gt; "frank"}]
</code></pre></div></div> <p>So that seemed pretty straightforward. I then tried to make regular expressions work. This had me stumped for hours. There is a BSON.Regex in mongodb and I “knew” I had to use that but if you look at the test cases for mongodb you’ll see that the two tests related to BSON.Regex just form two different ones and then inspect them to ensure they are setup properly.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>test "inspect BSON.Regex" do
  value = %BSON.Regex{pattern: "abc"}
  assert inspect(value) == "#BSON.Regex&lt;\"abc\"&gt;"

  value = %BSON.Regex{pattern: "abc", options: "i"}
  assert inspect(value) == "#BSON.Regex&lt;\"abc\", \"i\"&gt;"
end
</code></pre></div></div> <p>so I tried to do something like this :</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>iex(2)&gt; :mongo |&gt; Mongo.find("testData", %{x: %BSON.Regex{pattern: "F"}}) |&gt; Enum.to_list()
iex(3)&gt; :mongo |&gt; Mongo.find("testData", %{x: %BSON.Regex{pattern: "F"}}) |&gt; Enum.to_list()
** (ArgumentError) argument error
                    :erlang.iolist_size(["", 11, ["x", 0], [["F", 0], nil, 0]])
          (mongodb) lib/bson/encoder.ex:108: BSON.Encoder.document/1
           (elixir) lib/enum.ex:1229: Enum."-map/2-lists^map/1-0-"/2
    (db_connection) lib/db_connection.ex:1001: DBConnection.encode/4
    (db_connection) lib/db_connection.ex:635: DBConnection.execute/4
          (mongodb) lib/mongo.ex:368: Mongo.raw_find/5
          (mongodb) lib/mongo/cursor.ex:34: anonymous fn/6 in Enumerable.Mongo.Cursor.start_fun/6
           (elixir) lib/stream.ex:1242: anonymous fn/5 in Stream.resource/3
</code></pre></div></div> <p>Well, nope. I’m doing something wrong but what? The problem is that the definition of BSON.Regex doesn’t define default values for the two parts of the defstruct : pattern and options. But, the code that uses BSON.Regex expects that both of them will be there. So, the following works fine :</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>iex(4)&gt; :mongo |&gt; Mongo.find("testData", %{x: %BSON.Regex{pattern: "F", options: ""}}) |&gt; Enum.to_list()
[%{"_id" =&gt; #BSON.ObjectId&lt;58d4b1d6a6ba445542adc9d5&gt;, "x" =&gt; "Frank"},
 %{"_id" =&gt; #BSON.ObjectId&lt;58d4b1d6a6ba445542adc9d6&gt;, "x" =&gt; "Fred"},
 %{"_id" =&gt; #BSON.ObjectId&lt;58d4b1d6a6ba445542adc9d7&gt;, "x" =&gt; "Four"},
 %{"_id" =&gt; #BSON.ObjectId&lt;58d4b1d6a6ba445542adc9d8&gt;, "x" =&gt; "ourF"},
 %{"_id" =&gt; #BSON.ObjectId&lt;58d4b1d6a6ba445542adc9da&gt;, "x" =&gt; "Foot"}]
</code></pre></div></div> <p>You can see from the results that what this did was to match on any document in our collection that had a “F” character in the “x” field (regardless of its position).</p> <p>What are the options? What do they do? The best doc I could find was on the godoc.org site.</p> <p>“RegEx represents a regular expression. The Options field may contain individual characters defining the way in which the pattern should be applied, and must be sorted. Valid options as of this writing are ‘i’ for case insensitive matching, ‘m’ for multi-line matching, ‘x’ for verbose mode, ‘l’ to make \w, \W, and similar be locale-dependent, ‘s’ for dot-all mode (a ‘.’ matches everything), and ‘u’ to make \w, \W, and similar match unicode. The value of the Options parameter is not verified before being marshaled into the BSON format.”</p> <p>I’m not sure that these flags are applicable. It looks like the pattern in this case is always a regex that is compiled. I can do :</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>iex&gt; :mongo |&gt; Mongo.find("testData", %{x: %BSON.Regex{pattern: "Frank|Fred", options: ""}}) |&gt; Enum.to_list()
[%{"_id" =&gt; #BSON.ObjectId&lt;58d49868a6ba445542adc9c9&gt;, "x" =&gt; "Frank"},
 %{"_id" =&gt; #BSON.ObjectId&lt;58d49868a6ba445542adc9ca&gt;, "x" =&gt; "Fred"}]
</code></pre></div></div> <p>and we find both the row with Frank and the row with Fred. The “|” character is a logical OR. I can change this to match case-insensitive by passing “i” as an option. This does seem to have a useful impact.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>iex&gt; :mongo |&gt; Mongo.find("testData", %{x: %BSON.Regex{pattern: "Frank|Fred", options: "i"}}) |&gt; Enum.to_list()
[%{"_id" =&gt; #BSON.ObjectId&lt;58d49868a6ba445542adc9c9&gt;, "x" =&gt; "Frank"},
 %{"_id" =&gt; #BSON.ObjectId&lt;58d49868a6ba445542adc9ca&gt;, "x" =&gt; "Fred"},
 %{"_id" =&gt; #BSON.ObjectId&lt;58d4aa7ea6ba445542adc9d2&gt;, "x" =&gt; "frank"}]
</code></pre></div></div> <p>Passing any string will match a document if the search element occurs anywhere in the string. So,</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>iex &gt; :mongo |&gt; Mongo.find("testData", %{x: %BSON.Regex{pattern: "an", options: ""}}) |&gt; Enum.to_list()
[%{"_id" =&gt; #BSON.ObjectId&lt;58d49868a6ba445542adc9c9&gt;, "x" =&gt; "Frank"},
 %{"_id" =&gt; #BSON.ObjectId&lt;58d4aa7ea6ba445542adc9d2&gt;, "x" =&gt; "frank"}]
</code></pre></div></div> <p>If you just wanted to find the strings that start with “an” then you can use an anchoring character “^” as in :</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>iex &gt; :mongo |&gt; Mongo.find("testData", %{x: %BSON.Regex{pattern: "^an", options: ""}}) |&gt; Enum.to_list()
[]
</code></pre></div></div> <p>You can find documents that can contain numbers in the “x” field with :</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>iex &gt;  :mongo |&gt; Mongo.find("testData", %{x: %BSON.Regex{pattern: "[0-9]", options: ""}}) |&gt; Enum.to_list()
[%{"_id" =&gt; #BSON.ObjectId&lt;58d4b1d6a6ba445542adc9db&gt;, "x" =&gt; "123324"},
 %{"_id" =&gt; #BSON.ObjectId&lt;58d4b1d6a6ba445542adc9dc&gt;, "x" =&gt; "123324 ABC"}]
</code></pre></div></div> <p>Since Mongo is using a Perl compatible regex a good resource for simple regex is the <a href="http://perldoc.perl.org/perlrequick.html#Simple-word-matching" rel="external nofollow noopener" target="_blank">perldoc</a>.</p> <p>This is about all I’ve learned about the Elixir Mongo driver so far. I hope to spend some more time with it over the next few days to learn more about both it and Mongo.</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/supervision/">Elixir/OTP Supervision</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2017/phoenix-and-datatables/">Elixir, Phoenix Framework and Datatables</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/macros-ini-unit-tests/">Elxiir Unit Tests and Iterating a Single Test</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2019/reading-dynamo-streams/">Elixir, Reading Dynamo Streams and Layoffs</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2017/ecto-embeds-many/">Elixir, Ecto, embeds_many</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Frank McGeough. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?b7816bd189846d29eded8745f9c4cf77"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.min.js" integrity="sha256-rjmgmaB99riUNcdlrDtcAiwtLIojSxNyUFdl+Qh+rB4=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?601a2d3465e2a52bec38b600518d5f70"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let theme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===theme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=document.querySelector(".navbar-collapse");e.classList.contains("show")&&e.classList.remove("show"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-about",title:"about",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-blog",title:"blog",description:"",section:"Navigation",handler:()=>{window.location.href="/blog/"}},{id:"nav-projects",title:"projects",description:"Various github projects",section:"Navigation",handler:()=>{window.location.href="/projects/"}},{id:"nav-repositories",title:"repositories",description:"Some Github users and repos that I think are worth following",section:"Navigation",handler:()=>{window.location.href="/repositories/"}},{id:"nav-cv",title:"cv",description:"Work history",section:"Navigation",handler:()=>{window.location.href="/cv/"}},{id:"post-oh-susanna",title:"Oh! Susanna",description:"Mavis Mule and Ring Slide",section:"Posts",handler:()=>{window.location.href="/blog/2024/oh-susannah/"}},{id:"post-elxiir-unit-tests-and-iterating-a-single-test",title:"Elxiir Unit Tests and Iterating a Single Test",description:"What does it mean when I have a test block in Elixir?",section:"Posts",handler:()=>{window.location.href="/blog/2024/macros-ini-unit-tests/"}},{id:"post-never-make-it-home-by-seven",title:"Never make it home by seven",description:"Recording using the Strymon Clouburst reverb pedal",section:"Posts",handler:()=>{window.location.href="/blog/2024/been-too-long-at-the-fair/"}},{id:"post-and-sometimes-i-use-a-guitar-pedal",title:"And sometimes I use a guitar pedal",description:"Recording using the Strymon Clouburst reverb pedal",section:"Posts",handler:()=>{window.location.href="/blog/2024/strymon-clouburst/"}},{id:"post-first-guitar",title:"First Guitar",description:"Description of My Taylor 310",section:"Posts",handler:()=>{window.location.href="/blog/2024/first-guitar/"}},{id:"post-shabat-lion-gb",title:"Shabat Lion GB",description:"Description of My Shabat Lion GB",section:"Posts",handler:()=>{window.location.href="/blog/2024/shabat-guitar/"}},{id:"post-ci-elixir-and-mix-lock",title:"CI, Elixir and mix.lock",description:"Ensure your mix.lock file is not changing without your knowledge",section:"Posts",handler:()=>{window.location.href="/blog/2024/ci-and-mix-lock-file/"}},{id:"post-vic-chesnutt-and-old-cover-from-2009",title:"Vic Chesnutt and Old Cover from 2009",description:"Vic Chesnutt passed in 2009 and I recorded one of his songs",section:"Posts",handler:()=>{window.location.href="/blog/2024/vic-chestnut-supernatural/"}},{id:"post-another-guitar-recording",title:"Another Guitar Recording",description:"A simple recording of a nice Avett Brothers song",section:"Posts",handler:()=>{window.location.href="/blog/2024/more-music/"}},{id:"post-flushing-ecto-db-connections-periodically-in-elixir",title:"Flushing Ecto db connections periodically in Elixir",description:"Sample code to show how to use disconnect_all",section:"Posts",handler:()=>{window.location.href="/blog/2024/ecto-periodic-flush/"}},{id:"post-mavis-mule-and-learning-slide",title:"Mavis Mule and Learning Slide",description:"Describes the Mule Resophonic Guitar company and my attempts to learn slide guitar",section:"Posts",handler:()=>{window.location.href="/blog/2024/mule-resonator-intro/"}},{id:"post-elixir-otp-supervision",title:"Elixir/OTP Supervision",description:"Sample code to demonstrate some aspects of Elixir supervision",section:"Posts",handler:()=>{window.location.href="/blog/2024/supervision/"}},{id:"post-elixir-and-dependencies",title:"Elixir and Dependencies",description:"Keeping Your Elixir Dependencies Up To Date",section:"Posts",handler:()=>{window.location.href="/blog/2024/updating-elixir-dependencies/"}},{id:"post-debugging-elixir-in-production",title:"Debugging Elixir in Production",description:"Some debugging suggestions specific to Elixir production",section:"Posts",handler:()=>{window.location.href="/blog/2024/debug-in-production/"}},{id:"post-elixir-parameter-validation-with-ecto",title:"Elixir, Parameter Validation with Ecto",description:"Using the Ecto library to validate API Parameters",section:"Posts",handler:()=>{window.location.href="/blog/2023/parameter-validation-with-ecto/"}},{id:"post-four-thousand-weeks",title:"Four Thousand Weeks",description:"Notes on the book Four Thousand Weeks, Time Management for Mortals",section:"Posts",handler:()=>{window.location.href="/blog/2023/four-thouand-weeks/"}},{id:"post-elixir-programming-puzzles-and-sorting-arrays",title:"Elixir, Programming Puzzles and Sorting Arrays",description:"Elixir puzzles",section:"Posts",handler:()=>{window.location.href="/blog/2019/contiguous-sort-elixir/"}},{id:"post-elixir-reading-dynamo-streams-part-3",title:"Elixir, Reading Dynamo Streams (Part 3)",description:"How to read from Dynamo stream in Elixir",section:"Posts",handler:()=>{window.location.href="/blog/2019/dynamo-streams-3/"}},{id:"post-elixir-reading-dynamo-streams-part-2",title:"Elixir, Reading Dynamo Streams (Part 2)",description:"How to read from Dynamo stream in Elixir",section:"Posts",handler:()=>{window.location.href="/blog/2019/dynamo-streams-2/"}},{id:"post-elixir-reading-dynamo-streams-and-layoffs",title:"Elixir, Reading Dynamo Streams and Layoffs",description:"How to read from Dynamo stream in Elixir",section:"Posts",handler:()=>{window.location.href="/blog/2019/reading-dynamo-streams/"}},{id:"post-elixir-ecto-subqueries-group-by",title:"Elixir, Ecto, Subqueries, GROUP BY",description:"Exploring subqueries and group by with Elixir&#39;s ecto library",section:"Posts",handler:()=>{window.location.href="/blog/2018/more-queries-in-ecto/"}},{id:"post-elixir-ecto-update-all-with-join",title:"Elixir/Ecto - update_all with join",description:"How to use update_all with join in Elixir",section:"Posts",handler:()=>{window.location.href="/blog/2017/ecto-updateall-join/"}},{id:"post-monitor-postgres-pgbouncer",title:"Monitor Postgres pgbouncer",description:"How to monitor the Postgresql load balancer pgbouncer",section:"Posts",handler:()=>{window.location.href="/blog/2017/monitor-pgbouncer/"}},{id:"post-rename-inserted-at-column-in-elixir-ecto",title:"Rename inserted_at column in Elixir/Ecto",description:"Modifying the name of a built-in column in Elixir/Ecto",section:"Posts",handler:()=>{window.location.href="/blog/2017/ecto-use-created-at-instead-of-inserted-at/"}},{id:"post-elixir-phoenix-and-ecto-fragment-and-similar-to",title:"Elixir, Phoenix and Ecto fragment and SIMILAR TO",description:"Using regex style capabilities in Elixir with Ecto",section:"Posts",handler:()=>{window.location.href="/blog/2017/ecto-similar/"}},{id:"post-using-postgres-copy-with-elixir-ecto",title:"Using Postgres COPY with Elixir/Ecto",description:"Using Postgresql COPY with the Elixir ecto db library",section:"Posts",handler:()=>{window.location.href="/blog/2017/ecto-postgres-copy/"}},{id:"post-elixir-ecto-embeds-many",title:"Elixir, Ecto, embeds_many",description:"Features of Ecto - Elixir&#39;s database library",section:"Posts",handler:()=>{window.location.href="/blog/2017/ecto-embeds-many/"}},{id:"post-elixir-ecto-tables-without-id-in-relationships",title:"Elixir, Ecto, Tables without id in Relationships",description:"Using tables without id primary key in Ecto",section:"Posts",handler:()=>{window.location.href="/blog/2017/elixir-ecto-no-id-tables/"}},{id:"post-elixir-ex-aws-library-temporary-security-tokens",title:"Elixir, ex_aws Library, Temporary Security Tokens",description:"Features of the ex_aws Elixir library",section:"Posts",handler:()=>{window.location.href="/blog/2017/ex-aws-temporary-security/"}},{id:"post-elixir-mongo-no-local-return-oh-my",title:"Elixir, Mongo, No Local Return, Oh My!",description:"Accessing MongoDB with Elixir",section:"Posts",handler:()=>{window.location.href="/blog/2017/elixir-mongo-no-local-return/"}},{id:"post-elixir-mongo-exploring-library-code",title:"Elixir, Mongo, Exploring Library Code",description:"Accessing MongoDB with Elixir",section:"Posts",handler:()=>{window.location.href="/blog/2017/elixir-mongo-connection/"}},{id:"post-elixir-mongo-regex",title:"Elixir, Mongo, Regex",description:"Accessing MongoDB with Elixir",section:"Posts",handler:()=>{window.location.href="/blog/2017/elixir-mongodb/"}},{id:"post-your-data-says-your-code-is-ugly",title:"Your Data Says Your Code Is Ugly",description:"What does your data representation say about your code?",section:"Posts",handler:()=>{window.location.href="/blog/2017/your-data-says-your-code-is-ugly/"}},{id:"post-elixir-phoenix-framework-and-datatables",title:"Elixir, Phoenix Framework and Datatables",description:"Exploring Features of Elixir",section:"Posts",handler:()=>{window.location.href="/blog/2017/phoenix-and-datatables/"}},{id:"post-elixir-and-ruby-expand-path",title:"Elixir and Ruby expand_path",description:"Features of Elixir",section:"Posts",handler:()=>{window.location.href="/blog/2016/relative-paths/"}},{id:"post-elixir-ecto-postgresql-grouping-sets",title:"Elixir/Ecto Postgresql Grouping sets",description:"Exploring Features of Ecto - Elixir&#39;s Database Library",section:"Posts",handler:()=>{window.location.href="/blog/2016/10-13-00-ecto-grouping-sets/"}},{id:"post-elixir-ecto-migrate-and-rollback",title:"Elixir/Ecto migrate and rollback",description:"Exploring Features of Ecto - Elixir&#39;s Database Library",section:"Posts",handler:()=>{window.location.href="/blog/2016/16-42-00-ecto-migrate-rollback/"}},{id:"post-elixirconf2016-and-ecto",title:"ElixirConf2016 and Ecto",description:"Review of Elixir Config 2016",section:"Posts",handler:()=>{window.location.href="/blog/2016/14-00-00-elixirecto/"}},{id:"post-programming-elixir",title:"Programming Elixir",description:"Learning Elixir",section:"Posts",handler:()=>{window.location.href="/blog/2016/programming-elixir/"}},{id:"post-learning-elixir-and-phoenix",title:"Learning Elixir and Phoenix",description:"Learning Elixir",section:"Posts",handler:()=>{window.location.href="/blog/2016/elixir-phoenix-ecto/"}},{id:"post-use-postgresql-9-5-upsert-to-return-existing-id",title:"Use Postgresql 9.5 Upsert to Return Existing id",description:"Returning the primary key id on upsert with Postgresql",section:"Posts",handler:()=>{window.location.href="/blog/2016/postgres-upsert/"}},{id:"post-practice-a-new-language-with-exercism",title:"Practice a new language with exercism",description:"Learning a language with online courses",section:"Posts",handler:()=>{window.location.href="/blog/2016/exercism-web-site/"}},{id:"post-upgrade-to-9-5-postgresql-on-os-x",title:"Upgrade to 9.5 Postgresql on OS X",description:"Postgresql install tutorial",section:"Posts",handler:()=>{window.location.href="/blog/2016/upgrade_osx_postgres/"}},{id:"post-ruby-resources",title:"Ruby Resources",description:"Information on Ruby Resources",section:"Posts",handler:()=>{window.location.href="/blog/2016/ruby-resources/"}},{id:"post-using-git-from-inside-atom",title:"Using Git From Inside Atom",description:"Information on using git in the Atom editor",section:"Posts",handler:()=>{window.location.href="/blog/2015/using-git-from-inside-atom/"}},{id:"post-simple-error-in-atom-with-rubocop",title:"Simple Error in Atom with Rubocop",description:"Information on running rubocop in the Atom editor",section:"Posts",handler:()=>{window.location.href="/blog/2015/simple-error-in-atom-with-rubocop/"}},{id:"post-using-rubocop-in-atom",title:"Using Rubocop in Atom",description:"Information on running rubocop in the Atom editor",section:"Posts",handler:()=>{window.location.href="/blog/2015/using-rubocop-in-atom/"}},{id:"post-postgresql-lag-and-windowing-function",title:"Postgresql - Lag and Windowing Function",description:"Using Lag and window operations with Postgresql",section:"Posts",handler:()=>{window.location.href="/blog/2015/postgresql-lag-and-windowing-function/"}},{id:"post-more-atom-and-ruby-using-ruby-test",title:"More Atom and Ruby - Using ruby-test",description:"Using Ruby with the Atom editor",section:"Posts",handler:()=>{window.location.href="/blog/2015/more-atom-and-ruby-using-ruby-test/"}},{id:"post-george-washington-and-torture",title:"George Washington and Torture",description:"Historical Quotes",section:"Posts",handler:()=>{window.location.href="/blog/2014/george-washington-and-torture/"}},{id:"post-postgresql-optimizing-sql-performance",title:"Postgresql - Optimizing SQL Performance",description:"SQL Optimization with Postgresql",section:"Posts",handler:()=>{window.location.href="/blog/2014/postgresql-optimizing-sql-performance/"}},{id:"post-postgresql-connection-info",title:"Postgresql Connection Info",description:"Who is connected to my Postgres database?",section:"Posts",handler:()=>{window.location.href="/blog/2014/postgresql-connection-info/"}},{id:"post-moroccan-style-brisket",title:"Moroccan Style Brisket",description:"Brisket Recipe",section:"Posts",handler:()=>{window.location.href="/blog/2014/moroccan-style-brisket/"}},{id:"project-elixir-and-aws-autoscaling",title:"Elixir and AWS autoscaling",description:"An Elixir library for the AWS EC2 Auto Scaling API as plug-in for the ex_aws system",section:"Projects",handler:()=>{window.location.href="/projects/2019-ex-aws-autoscaling/"}},{id:"project-elixir-and-aws-cloudtrail",title:"Elixir and AWS CloudTrail",description:"An Elixir library for the AWS CloudTrail API that plugs into the ex_aws system",section:"Projects",handler:()=>{window.location.href="/projects/2019-ex-aws-cloudtrail/"}},{id:"project-elixir-and-aws-code-deploy",title:"Elixir and AWS Code Deploy",description:"An Elixir library for the AWS Code Deploy API that plugs into the ex_aws system",section:"Projects",handler:()=>{window.location.href="/projects/2019-ex-aws-code-deploy/"}},{id:"project-elixir-and-aws-code-pipeline",title:"Elixir and AWS Code Pipeline",description:"An Elixir library for the AWS Code Pipeline API that plugs into the ex_aws system",section:"Projects",handler:()=>{window.location.href="/projects/2019-ex-aws-code-pipeline/"}},{id:"project-elixir-and-aws-support",title:"Elixir and AWS Support",description:"An Elixir library for the AWS Support API that plugs into the ex_aws system",section:"Projects",handler:()=>{window.location.href="/projects/2019-ex-aws-support/"}},{id:"project-elixir-exploration-of-the-erlang-brod-library",title:"Elixir exploration of the Erlang brod library",description:"Elixir code exploration of the Erlang brod Kafka library",section:"Projects",handler:()=>{window.location.href="/projects/2024-brod-mimic/"}},{id:"project-elixir-and-supervision",title:"Elixir and Supervision",description:"Exploration of how supervision works in Elixir",section:"Projects",handler:()=>{window.location.href="/projects/2024-elixir-supervision/"}},{id:"project-elixir-sleeplock",title:"Elixir Sleeplock",description:"Allow only a certain number of processes to execute a block of code at one time",section:"Projects",handler:()=>{window.location.href="/projects/2024-ex-sleeplock/"}},{id:"socials-email",title:"Send email",section:"Socials",handler:()=>{window.open("mailto:%66%6D%63%67%65%6F%75%67%68@%67%6D%61%69%6C.%63%6F%6D","_blank")}},{id:"socials-github",title:"GitHub",section:"Socials",handler:()=>{window.open("https://github.com/fmcgeough","_blank")}},{id:"socials-linkedin",title:"LinkedIn",section:"Socials",handler:()=>{window.open("https://www.linkedin.com/in/fmcgeough","_blank")}},{id:"socials-rss",title:"RSS Feed",section:"Socials",handler:()=>{window.open("/feed.xml","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> </body> </html>